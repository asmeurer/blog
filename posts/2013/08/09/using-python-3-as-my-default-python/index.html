<!DOCTYPE html><html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Aaron Meurer">
    <title>Using Python 3 as my default Python | Aaron Meurer's Blog</title>
    
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
   tex2jax: {
       inlineMath: [ ['$','$'], ["\\(","\\)"] ],
       displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
   },
   displayAlign: 'left', // Change this to 'center' to center equations.
   "HTML-CSS": {
       styles: {'.MathJax_Display': {"margin": 0}}
   }
});
</script>

            <link href="../../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
      <link rel="canonical" href="http://asmeurer.github.io/posts/2013/08/09/using-python-3-as-my-default-python/">
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../../rss.xml">

    

        <meta name="twitter:card" content="summary">
        <meta name="og:url" content="http://asmeurer.github.io/posts/2013/08/09/using-python-3-as-my-default-python/">
            <meta name="twitter:site:id" content="123456">
            <meta name="twitter:creator:id" content="654321">
        <meta name="og:title" content="Using Python 3 as my default Python">
            <meta name="og:description" content="So I just fin­ished my in­tern­ship with  Con­tin­u­um. For the in­tern­ship, I pri­mar­i­ly worked on  Ana­con­da, their free Python dis­tri­bu­tion, and  con­da, its free (B­SD open source) pack­age">




    
<link rel="stylesheet" type="text/css" href="../../../../../assets/css/tipuesearch.css">
</head><body><div id="tipue_search_content" style="margin-left: auto; margin-right: auto; padding: 20px;"></div>



<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid"><!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="http://asmeurer.github.io/">Aaron Meurer's Blog</a>
        </div><!-- /.navbar-header -->
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                
                <li><a href="../../../../../archive.html">Archives</a>
                </li><li><a href="../../../../../categories/index.html">Tags</a>
                </li><li><a href="../../../../../rss.xml">RSS</a>

            </li></ul>
                
<span class="navbar-form pull-left">
<input type="text" id="tipue_search_input">
</span>

            <ul class="nav navbar-nav navbar-right">
                
                
                    
    <li>
    <a href="index.wp" id="sourcelink">Source</a>
    </li>

            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<!-- End of Menubar -->

<div class="container">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
    <article class="postbox post-text">
    <div class="h-entry" itemscope="itemscope" itemtype="http://schema.org/Article">
    
    <h1 class="p-name" itemprop="headline name">Using Python 3 as my default Python</h1>

    <hr>
    <small>
        Posted: <time class="published dt-published" datetime="2013-08-09T21:59:55-05:00" itemprop="datePublished">2013-08-09 21:59</time>
        

        

    </small>
    <hr>
    <div class="e-content" itemprop="articleBody text">
    <div><p></p><p>So I just fin­ished my in­tern­ship with  <a href="http://continuum.io">Con­tin­u­um</a>. For the in­tern­ship, I pri­mar­i­ly worked on  <a href="http://continuum.io/downloads">Ana­con­da</a>, their free Python dis­tri­bu­tion, and  <a href="https://github.com/continuumIO/conda">con­da</a>, its free (B­SD open source) pack­age man­ag­er. I might write a blog post about con­da lat­er, but suf­fice it to say that I'm con­vinced that it is do­ing pack­age man­age­ment the right way. One of the ma­jor de­vel­op­ments this sum­mer that I helped out with was the abil­i­ty for  <a href="http://docs.continuum.io/conda/build.html">any­body to build a con­da pack­age</a>, and a site called  <a href="https://binstar.org">Bin­star</a>  where peo­ple can up­load them (the be­ta code is "bin­star in be­ta" with no quotes).  </p><p>An­oth­er thing that hap­pened over the sum­mer is that Al­mar Klein made con­da Python 3 com­pat­i­ble, so that it can be used with the  <a href="http://www.pyzo.org">Py­zo</a>  pro­jec­t, which is Python 3 on­ly.    The way this was done was by us­ing a sin­gle code base for Python 2 and Python 3. Thus, this be­came the first time I have done any heavy de­vel­op­ment on Python source that had to be Python 3 com­pat­i­ble from a sin­gle code­base (as op­posed to us­ing the 2to3 tool).  </p><p>An­oth­er de­vel­op­ment this sum­mer was that SymPy was re­leased (<a href="https://github.com/sympy/sympy/releases/tag/sympy-0.7.3">0.7.3</a>). This marked the last re­lease to sup­port Python 2.5. Around the same time, we dis­cussed our Python 3 sit­u­a­tion, and how an­noy­ing it is to run use2­to3 all the time. The re­sult was  <a href="https://github.com/sympy/sympy/pull/2318">this pull re­quest</a>, which made SymPy use a sin­gle code base for Python 2 and Python 3. Now, that pull re­quest is hard to mull through, but the im­por­tant part to look at is the  <a href="https://github.com/sympy/sympy/pull/2318/files#diff-124">com­pat­i­bil­i­ty</a>  file. Ev­ery­thing in that file has to be im­port­ed and used, be­cause it rep­re­sents things that are dif­fer­ent be­tween Python 2 and Python 3. Ondřej has writ­ten more about this on  <a href="http://ondrejcertik.blogspot.com/2013/08/how-to-support-both-python-2-and-3.html">his blog</a>.  </p><p>In al­l, I think that sup­port­ing Python 2.6-3.3 (not in­clud­ing 3.0 or 3.1) is not that bad. The com­pat­i­bil­i­ty file has a few things, but think­ing back, it was just that bad or worse sup­port­ing Python 2.4-2.7 (heck, back then, we could­n't even use the  <code>all</code>  func­tion with­out im­port­ing it). The sit­u­a­tion is much bet­ter to­day now that we use Travis too, since any mis­take is caught be­fore the pull re­quest is merged. The worst of course is the  <code>print</code>  func­tion, but since that can be im­port­ed from  <code><strong>fu­ture</strong></code>, I will be warned about it pret­ty fast, since  <code>print</code>  as a state­ment is a Syn­tax­Er­ror in that case. It al­so does­n't take that long to get in­to the habit of typ­ing  <code>()</code>  af­ter  <code>print</code>.  </p> 
 <p>Of course, there are a lot of nice Python 3 on­ly fea­tures that we can­not use, but this was the case for sup­port­ing Python 2.4-2.7 too (e.g., the with state­ment and the ternary state­ment were both in­tro­duced in Python 2.5).   So this is re­al­ly noth­ing new. There is al­ways a stick to drop the old­est Python ver­sion we sup­port, and a lag on what fea­tures we can use. Now that we have dropped Python 2.5 sup­port in SymPy, we can fi­nal­ly start us­ing new-style string for­mat­ting, ab­stract base class­es, rel­a­tive im­port­s, and key­word ar­gu­ments af­ter  <code>*args</code>.</p> 
 <p>So as a re­sult of this, I've come to the con­clu­sion that Python 3 is  <em>not</em>  an­oth­er lan­guage. It's just an­oth­er ver­sion of the same lan­guage. Sup­port­ing Python 2.6-3.3 is no dif­fer­ent from sup­port­ing Python 2.4-2.7. You have to have some com­pat­i­bil­i­ty im­port­s, you can't use new lan­guage fea­tures, and you have to have good test cov­er­age. I think that the core Python folks made a mis­take by pre­sent­ing Python 3 as a new lan­guage. It has made peo­ple an­tag­o­nis­tic against Python 3 (well, that and the  <code>print</code>  func­tion, which was an­oth­er stupid mis­take, be­cause even if it was a good idea, it alone has kept too many peo­ple from switch­ing). 2to3 was a mis­take too, be­cause it per­pet­u­at­ed this idea.  </p> 
 <p>In the past, I have al­ways de­vel­oped against the lat­est ver­sion of Python: 2.6 was the best when I learned Python, and then 2.7. Even though I have had to sup­port back to 2.4, I on­ly used 2.4 ex­plic­it­ly when test­ing.  </p> 
 <p>Well, giv­en what I said above, the on­ly log­i­cal thing to do is to use Python 3.3 as my main de­vel­op­ment Python. If you use Ana­con­da, there are ba­si­cal­ly two ways you can do this. The first is to just cre­ate a Python 3 en­vi­ron­ment (<code>con­da cre­ate -n python3 python=3</code>), and put that first in your  <code>PATH</code>  (y­ou al­so will need to add  <code>source ac­ti­vate python3</code>  to your bash pro­file if you go this route, so that  <code>con­da in­stall</code>  will in­stall in­to that en­vi­ron­ment by de­fault­). For me, though, I plan to use a Python 3 ver­sion of Ana­con­da, which has Python 3 as the de­fault. The main dif­fer­ence here is that  <code>con­da</code>  it­self is writ­ten in Python 3. Aside from pu­ri­ty, and the fact that I plan to fix any oc­ca­sion­al con­da bugs that I come across, the oth­er dif­fer­ence here is that con­da it­self will de­fault to Python 3 in this case (i.e., when cre­at­ing a new en­vi­ron­ment with Python like  <code>con­da cre­ate -n en­vname python</code>, the Python will be Python 3, not Python 2, and al­so it will build against Python 3 by de­fault with  <code>con­da build</code>). Con­tin­u­um does not yet make Python 3 ver­sions of Ana­con­da, but there are Python 3 ver­sions of  <a href="http://repo.continuum.io/miniconda/index.html">Mini­con­da</a>  (Mini­con­da3), which is a stripped down ver­sion of Ana­con­da with just Python, the con­da pack­age man­ager, and its de­pen­den­cies. You can eas­i­ly in­stall Ana­con­da in­to it though with  <code>con­da in­stall ana­con­da</code>. I per­son­al­ly pre­fer to in­stall on­ly what I need to keep the disk us­age low (on an SS­D, disk space is sparse), so this is per­fect for me any­way.</p> 
 <p>My rec­om­men­da­tion is to put a Python 2 in­stal­la­tion sec­ond in your PATH, so that you can eas­i­ly call  <code>python2</code>  if you want to use Python 2. The eas­i­est way to do this is to cre­ate a con­da en­vi­ron­ment for it (<code>con­da cre­ate -n python2 python=2</code>) and add  <code>~/ana­con­da/en­vs/python2</code>  to your PATH.  </p> 
 <p>So far, I have run in­to a few is­sues:</p> 
 <ul>
    <li>Some pack­ages aren't build for Python 3 yet in Ana­con­da, or they don't sup­port it at al­l.  The big­gest block­er in Ana­con­da is Py­Side (at least on Mac OS X), though it should be com­ing soon.  </li> 
     <li>Some pack­ages on­ly in­stall en­try points with a "3" suf­fix, which is an­noy­ing. The big­gest of­fend­er here is IPython. I brought up this is­sue on their  <a href="http://mail.scipy.org/pipermail/ipython-dev/2013-August/012074.html">mail­ing list</a>,  <del>so hope­ful­ly they will see the light and fix this be­fore the next re­lease</del>, but it has­n't been im­ple­ment­ed yet. I al­so plan to make sure that the Ana­con­da pack­age for IPython in­stalls an  <code>ipython</code>  en­try point in­to Python 3 en­vi­ron­ments. Even so, one has to re­mem­ber this when in­stalling old ver­sions of IPython in en­vi­ron­ments.  </li> 
     <li>There are some bugs in con­da in Python 3. Ac­tu­al­ly, I sus­pect that there are bugs in a lot of pack­ages in Python 3, be­cause peo­ple don't de­vel­op against it, un­less they have ex­cel­lent test cov­er­age. Even SymPy missed a few print state­ments.  </li> 
     <li>You can't  <code>set­up.py de­vel­op</code>  against any­thing that us­es 2to3 (like IPython).  </li> 
     <li>It's a lit­tle an­noy­ing work­ing against old ver­sions of SymPy (e.g., when dig­ging through the git his­to­ry to track some­thing down), be­cause I have to ex­plic­it­ly use Python 2. Con­da makes this eas­i­er be­cause I can just cre­ate a Python 2 en­vi­ron­ment and do  <code>source ac­ti­vate python2</code>  when I am us­ing Python 2. Or, for a one-of­f, I can just use  <code>python2</code>, and keep a Python 2 en­vi­ron­ment sec­ond in my PATH. But this is­sue is not re­al­ly new. For ex­am­ple, re­al­ly old ver­sions of SymPy on­ly work with Python 2.5, be­cause they used  <code>as</code>  as a vari­able name.</li> 
     <li>Ev­ery­one else is­n't us­ing Python 3 yet, so if I write a script that on­ly needs to sup­port "the lat­est ver­sion of Python," it prob­a­bly needs to sup­port Python 2.7, or else I should ex­plic­it­ly put  <code>/us­r/bin/env python3</code>  in the she­bang line. But for SymPy, I have to be aware of how to sup­port 2.6-3.3, so I have to know all the fea­tures that are on­ly in some ver­sions any­way. On the oth­er side of things, if I run some ran­dom Python script with a she­bang line, it prob­a­bly is go­ing to ex­pect Python 2 and not Python 3, so I ei­ther have to ex­plic­it­ly add  <code>python2</code>  to the com­mand or ac­ti­vate a Python 2 en­vi­ron­ment</li> 
     <li>Some pack­ages just don't sup­port Python 3 yet. Fab­ric (and its main de­pen­den­cy, Paramiko) is the one ex­am­ple I have come across so far in my own work. So I have to fall back to Python 2 if I want to use them. The best thing to do here is to pitch in and help these li­braries port them­selves.</li> 
     <li>Peo­ple al­ways give code ex­am­ples with  <code>print</code>  as a state­ment in­stead of a func­tion, so I ei­ther have to fix it man­u­al­ly be­fore past­ing it or use Python 2. I had tried at one point to make a  <code>%print</code>  mag­ic for IPython that would let print work like a state­ment in Python 3, but I nev­er fin­ished it. I guess I should re­vis­it it.</li> 
 </ul>

<p>I'll up­date this list as I come across more is­sues.  </p> 
 <p>In al­l, so far, it's noth­ing too bad. Con­da makes switch­ing back to Python 2 easy enough, and deal­ing with these is­sues are hard­ly the worst thing I have to deal with when de­vel­op­ing with Python. And if any­thing, see­ing Python 2-3 bugs and is­sues makes me more aware of the dif­fer­ences be­tween the two ver­sions of the lan­guage, which is a good things since I have to de­vel­op against code that has to sup­port both.  </p></div>
    </div>
    </div>
    
        <ul class="pager">
            <li class="previous">
                <a href="../../../07/07/automating-the-sympy-release-process/" rel="prev">← Previous post</a>
            </li>
            <li class="next">
                <a href="../../22/python-3-single-codebase-vs-2to3/" rel="next">Next post →</a>
            </li>
        </ul>

        
        
        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="asmeurer",
            disqus_url="http://asmeurer.github.io/posts/2013/08/09/using-python-3-as-my-default-python/",
        disqus_title="Using Python 3 as my default Python",
        disqus_identifier="cache/posts/2013/08/09/using-python-3-as-my-default-python.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    <a href="//disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    

    </article>

        </div>
        <!--End of body content-->

        <footer>
            Contents © 2014         <a href="mailto:asmeurer@gmail.com">Aaron Meurer</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
<p xmlns:dct="http://purl.org/dc/terms/" xmlns:vcard="http://www.w3.org/2001/vcard-rdf/3.0#">
  <a rel="license" href="http://creativecommons.org/publicdomain/zero/1.0/">
    <img src="http://i.creativecommons.org/p/zero/1.0/88x31.png" style="border-style: none;" alt="CC0">
  </a>

        </p></footer>
    </div>
</div>


            <script src="../../../../../assets/js/all-nocdn.js" type="text/javascript"></script>


    
<!-- Social buttons -->
<div id="addthisbox" class="addthis_toolbox addthis_peekaboo_style addthis_default_style addthis_label_style addthis_32x32_style">
<a class="addthis_button_more">Share</a>
<ul><li><a class="addthis_button_facebook"></a>
</li><li><a class="addthis_button_google_plusone_share"></a>
</li><li><a class="addthis_button_linkedin"></a>
</li><li><a class="addthis_button_twitter"></a>
</li></ul>
</div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
<!-- End of social buttons -->


    <script type="text/javascript">jQuery("a.image-reference").colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script>
    

<script type="text/javascript" src="../../../../../assets/js/tipuesearch_set.js"></script>
<script type="text/javascript" src="../../../../../assets/js/tipuesearch.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#tipue_search_input').tipuesearch({
        'mode': 'json',
        'contentLocation': '/assets/js/tipuesearch_content.json',
        'showUrl': false
    });
});
</script>


</body></html>