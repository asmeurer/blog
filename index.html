<!DOCTYPE html>
<html prefix="        og: http://ogp.me/ns# article: http://ogp.me/ns/article#     " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="My blog">
<meta name="viewport" content="width=device-width">
<title>Aaron Meurer's Blog</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="rss.xml">
<link rel="canonical" href="https://asmeurer.com/blog/">
<link rel="next" href="index-4.html" type="text/html">
<!--[if lt IE 9]><script src="assets/js/html5shiv-printshiv.min.js"></script><![endif]--><link rel="prefetch" href="posts/whats-new-in-sympy-14/" type="text/html">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
         
    <header id="header"><h1 id="brand"><a href="https://asmeurer.com/blog/" title="Aaron Meurer's Blog" rel="home">

        <span id="blog-title">Aaron Meurer's Blog</span>
    </a></h1>

        

        
    <nav id="menu"><ul>
<li class="active"><a href=".">Blog<span class="sr-only"> (active)</span></a></li>
                <li><a href="about">About</a></li>
                <li><a href="work">Work</a></li>
                <li><a href="archive.html">Archives</a></li>
                <li><a href="rss.xml">RSS</a></li>

    

    
    
    </ul></nav></header><main id="content"><div class="postindex">
    <article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/whats-new-in-sympy-14/" class="u-url">What's New in SymPy 1.4</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Aaron Meurer
            </span></p>
            <p class="dateline">
            <a href="posts/whats-new-in-sympy-14/" rel="bookmark">
            <time class="published dt-published" datetime="2019-05-02T00:00:00-05:00" itemprop="datePublished" title="2019-05-02 00:00">2019-05-02 00:00</time></a>
            </p>
                <p class="commentline">
        
    <a href="posts/whats-new-in-sympy-14/#disqus_thread" data-disqus-identifier="cache/posts/whats-new-in-sympy-14.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p><em>This post has been cross-posted on the <a href="https://labs.quansight.org/blog/2019/04/whats-new-in-sympy-14/">Quansight Blog</a>.</em></p>
<p>As of November, 2018, I have been working at
<a href="https://www.quansight.com/">Quansight</a>. Quansight is a new startup founded by
the same people who started Anaconda, which aims to connect companies and open
source communities, and offers consulting, training, support and mentoring
services. I work under the heading of <a href="https://www.quansight.com/labs">Quansight
Labs</a>. Quansight Labs is a public-benefit
division of Quansight. It provides a home for a "PyData Core Team" which
consists of developers, community managers, designers, and documentation
writers who build open-source technology and grow open-source communities
around all aspects of the AI and Data Science workflow. As a part of this, I
am able to spend a fraction of my time working on SymPy.
<a href="https://www.sympy.org/en/index.html">SymPy</a>, for those who do not know, is a
symbolic mathematics library written in pure Python. I am the lead maintainer
of SymPy.</p>
<p>SymPy 1.4 was released on April 9, 2019. In this post, I'd like to go over
some of the highlights for this release. The full release notes for the
release can be found on the <a href="https://github.com/sympy/sympy/wiki/Release-Notes-for-1.4">SymPy
wiki</a>.</p>
<p>To update to SymPy 1.4, use</p>
<pre><code class="language-bash">conda install sympy
</code></pre>
<p>or if you prefer to use pip</p>
<pre><code class="language-bash">pip install -U sympy
</code></pre>
<p>The SymPy 1.4 release contains over <a href="https://github.com/sympy/sympy/wiki/Release-Notes-for-1.4#authors">500 changes from 38 different
submodules</a>,
so I will not be going over every change, but only a few of the main
highlights. A <a href="https://github.com/sympy/sympy/wiki/Release-Notes-for-1.4#authors">total of 104
people</a>
contributed to this release, of whom 66 contributed for the first time for
this release.</p>
<p>While I did not personally work on any of the changes listed below (my work
for this release tended to be more invisible, behind the scenes fixes), I did
do the release itself.</p>
<h2>Automatic LaTeX rendering in the Jupyter notebook</h2>
<p>Prior to SymPy 1.4, SymPy expressions in the notebook rendered by default with their
string representation. To get <code>LaTeX</code> output, you had to call <code>init_printing()</code>:</p>
<img src="sympy-1.3-notebook.png" alt="SymPy 1.3 rendering in the Jupyter lab notebook"><p>In SymPy 1.4, SymPy expressions now automatically render as LaTeX in the notebook:</p>
<img src="sympy-1.4-notebook.png" alt="SymPy 1.4 rendering in the Jupyter lab notebook"><p>However, this only applies automatically if the type of an object is a SymPy
expression. For built-in types such as lists or ints, <code>init_printing()</code> is
still required to get LaTeX printing. For example, <code>solve()</code> returns a list,
so does not render as LaTeX unless <code>init_printing()</code> is called:</p>
<img src="sympy-1.4-notebook-2.png" alt="SymPy 1.4 rendering in the Jupyter lab notebook with init_printing()"><p><code>init_printing()</code> is also still needed if you want to change any of the
printing settings, for instance, passing flags to the <code>latex()</code> printer or
selecting a different printer.</p>
<h2>Improved simplification of relational expressions</h2>
<p>Simplification of relational and piecewise expressions has been improved:</p>
<pre><code class="language-py">&gt;&gt;&gt; x, y, z, w = symbols('x y z w')
&gt;&gt;&gt; init_printing()
&gt;&gt;&gt; expr = And(Eq(x,y), x &gt;= y, w &lt; y, y &gt;= z, z &lt; y)
&gt;&gt;&gt; expr
x = y ∧ x ≥ y ∧ y ≥ z ∧ w &lt; y ∧ z &lt; y
&gt;&gt;&gt; simplify(expr)
x = y ∧ y &gt; Max(w, z)
</code></pre>
<pre><code class="language-py">&gt;&gt;&gt; expr = Piecewise((x*y, And(x &gt;= y, Eq(y, 0))), (x - 1, Eq(x, 1)), (0, True))
&gt;&gt;&gt; expr
⎧ x⋅y   for y = 0 ∧ x ≥ y
⎪
⎨x - 1      for x = 1
⎪
⎩  0        otherwise
&gt;&gt;&gt; simplify(expr)
0
</code></pre>
<h2>Improved MathML printing</h2>
<p>The MathML presentation printer has been greatly improved, putting it on par
with the existing Unicode and LaTeX pretty printers.</p>
<pre><code class="language-py">&gt;&gt;&gt; mathml(Integral(exp(-x**2), (x, -oo, oo)), 'presentation')
&lt;mrow&gt;&lt;msubsup&gt;&lt;mo&gt;&amp;#x222B;&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;-&lt;/mo&gt;&lt;mi&gt;&amp;#x221E;&lt;/mi&gt;&lt;/mrow&gt;&lt;mi&gt;&amp;#x221E;&lt;/mi&gt;&lt;/msubsup&gt;&lt;msup&gt;&lt;mi&gt;&amp;ExponentialE;&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;-&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;&amp;dd;&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mrow&gt;
</code></pre>
<p>If your <a href="https://caniuse.com/#feat=mathml">browser supports MathML</a> (at the
time of writing, only Firefox and Safari), you should see the above
presentation form for <code>Integral(exp(-x**2), (x, -oo, oo))</code> below:</p>
<p><math style="display: block;"><mrow><msubsup><mo>∫</mo><mrow><mo>-</mo><mi>∞</mi></mrow><mi>∞</mi></msubsup><msup><mi>ⅇ</mi><mrow><mo>-</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></msup><mo>ⅆ</mo><mi>x</mi></mrow></math></p>
<h2>Improvements to solvers</h2>
<p>Several improvements have been made to the solvers.</p>
<pre><code class="language-py">&gt;&gt;&gt; eq = Eq((x**2 - 7*x + 11)**(x**2 - 13*x + 42), 1)
&gt;&gt;&gt; eq
                2
               x  - 13⋅x + 42
⎛ 2           ⎞
⎝x  - 7⋅x + 11⎠               = 1
&gt;&gt;&gt; solve(eq, x) # In SymPy 1.3, this only gave the partial solution [2, 5, 6, 7]
[2, 3, 4, 5, 6, 7]
</code></pre>
<p>The ODE solver, <code>dsolve</code>, has also seen some improvements. Two new hints have
been added.</p>
<p><code>'nth_algebraic'</code> solves ODEs using <code>solve</code> by inverting the derivatives
algebraically:</p>
<pre><code class="language-py">&gt;&gt;&gt; f = Function('f')
&gt;&gt;&gt; eq = Eq(f(x) * (f(x).diff(x)**2 - 1), 0)
&gt;&gt;&gt; eq
⎛          2    ⎞
⎜⎛d       ⎞     ⎟
⎜⎜──(f(x))⎟  - 1⎟⋅f(x) = 0
⎝⎝dx      ⎠     ⎠
&gt;&gt;&gt; dsolve(eq, f(x)) # In SymPy 1.3, this only gave the solution f(x) = C1 - x
[f(x) = 0, f(x) = C₁ - x, f(x) = C₁ + x]
</code></pre>
<p><code>'nth_order_reducible'</code> solves ODEs that only involve derivatives of <code>f(x)</code>,
via the substitution $g(x)=f^{(n)}(x)$.</p>
<pre><code class="language-py">&gt;&gt;&gt; eq = Eq(Derivative(f(x), (x, 2)) + x*Derivative(f(x), x), x)
&gt;&gt;&gt; eq
               2
  d           d
x⋅──(f(x)) + ───(f(x)) = x
  dx           2
             dx
&gt;&gt;&gt; dsolve(eq, f(x))
                  ⎛√2⋅x⎞
f(x) = C₁ + C₂⋅erf⎜────⎟ + x
                  ⎝ 2  ⎠
</code></pre>
<h2>Dropping Python 3.4 support</h2>
<p>This is the last release of SymPy to support Python 3.4. SymPy 1.4 supports
Python 2.7, 3.4, 3.5, 3.6, 3.7, and PyPy. What's perhaps more exciting is that
the next release of SymPy, 1.5, which will be released later this year, will
be the last version to support Python 2.7.</p>
<p>Our
<a href="https://github.com/sympy/sympy/wiki/Python-version-support-policy">policy</a> is
to drop support for major Python versions when they reach their <a href="https://devguide.python.org/#status-of-python-branches">End of
Life</a>. In other words,
they receive no further support from the core Python team. Python 3.4 reached
its end of life on May 19 of this year, and Python 2.7 will reach its end of
life on January 1, 2020.</p>
<p>I have <a href="https://www.asmeurer.com/blog/posts/moving-away-from-python-2/">blogged in the
past</a> on why I
believe it is important for library authors to be proactive in dropping Python
2 support, and since then <a href="https://python3statement.org">a large number of Python
libraries</a> have either dropped support or
announced their plans to by 2020.</p>
<p>Having Python 2 support removed will not only allow us to remove a <a href="https://github.com/sympy/sympy/blob/sympy-1.4/sympy/core/compatibility.py">large
amount of compatibility
cruft</a>
from our codebase, it will also allow us to use some Python 3-only features
that will clean up our API, such as <a href="https://python-3-for-scientists.readthedocs.io/en/latest/python3_advanced.html#keyword-only-arguments">keyword-only
arguments</a>,
<a href="https://python-3-for-scientists.readthedocs.io/en/latest/python3_features.html#function-annotations">type
hints</a>,
and <a href="https://python-3-for-scientists.readthedocs.io/en/latest/python3_features.html#unicode-variable-names">Unicode variable
names</a>.
It will also enable <a href="https://github.com/sympy/sympy/issues?q=is%3Aissue+is%3Aopen+label%3A%22Dropping+Python+2%22">several internal
changes</a>
that will not be visible to end-users, but which will result in a much cleaner
and more maintainable codebase.</p>
<p>If you are still using Python 2, I strongly recommend switching to Python 3,
as otherwise the entire ecosystem of Python libraries is soon going to stop
improving for you. Python 3 is already highly recommended for SymPy usage due
to several key improvements. In particular, in Python 3, division of two
Python <code>int</code>s like <code>1/2</code> produces the float <code>0.5</code>. In Python 2, it does
integer division (producing <code>1/2 == 0</code>). The Python 2 integer division
behavior can lead to very surprising results when using SymPy (imagine writing
<code>x**2 + 1/2*x + 2</code> and having the <code>x</code> term "disappear"). When using SymPy, we
<a href="https://docs.sympy.org/latest/tutorial/gotchas.html#two-final-notes-and">recommend</a>
using rational numbers (like <code>Rational(1, 2)</code>) and avoiding <code>int/int</code>, but the
Python 3 behavior will at least maintain a mathematically correct result if
you do not do this. SymPy is also <a href="https://speed.python.org/comparison/?exe=12%2BL%2Bmaster%2C12%2BL%2B3.5%2C12%2BL%2B3.6%2C12%2BL%2B2.7&amp;ben=666%2C667%2C669%2C668&amp;env=1%2C2&amp;hor=false&amp;bas=none&amp;chart=normal+bars">already faster in Python
3</a>
due to things like <code>math.gcd</code> and <code>functools.lru_cache</code> being written in C,
and general performance improvements in the interpreter itself.</p>
<h2>And much more</h2>
<p>These are only a few of the highlights of the hundreds of changes in this
release. The full release notes can be found on <a href="https://github.com/sympy/sympy/wiki/Release-Notes-for-1.4">our
wiki</a>. The wiki
also has the in progress changes for our next release, <a href="https://github.com/sympy/sympy/wiki/Release-Notes-for-1.5">SymPy
1.5</a>, which will be
released later this year. Our <a href="https://github.com/sympy/sympy-bot">bot</a>
automatically collects release notes from every pull request, meaning SymPy
releases have very comprehensive and readable release notes pages. If you see
any mistakes on either page, feel free to edit the wiki and fix them.</p>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/github-cuts/" class="u-url">GitHub Cuts</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Aaron Meurer
            </span></p>
            <p class="dateline">
            <a href="posts/github-cuts/" rel="bookmark">
            <time class="published dt-published" datetime="2018-11-06T16:54:21-06:00" itemprop="datePublished" title="2018-11-06 16:54">2018-11-06 16:54</time></a>
            </p>
                <p class="commentline">
        
    <a href="posts/github-cuts/#disqus_thread" data-disqus-identifier="cache/posts/github-cuts.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>GitHub recently announced its <a href="https://blog.github.com/2018-08-28-announcing-paper-cuts/">paper cuts
initiative</a> to fix
minor issues that make things more difficult for GitHub users. As someone who
spends most of his day on <a href="https://github.com">github.com</a>, this initiative is
great, as these small cuts can quickly add up to a painful experience.</p>
<p>The initiative has already made some great fixes, such as <a href="https://blog.github.com/changelog/2018-07-31-unselectable-diff-markers/">making the diff
markers
unselectable</a>
and
<a href="https://blog.github.com/changelog/2018-10-08-issue-and-pull-request-hovercards/">hovercards</a>.
Small changes like these are usually quite easy for GitHub to do, but they
make a huge difference to those of use who use GitHub every day.</p>
<p>I <a href="https://twitter.com/asmeurer/status/1034528642389266432">recently asked</a>
how these cuts could be reported to GitHub for fixing, but got no response. So
I am writing this blog post.</p>
<p>To be very clear: I think that on the whole GitHub is great and they are doing
a great job. And it's still better than the alternatives (to put things in
perspective, I recently spent <a href="https://twitter.com/asmeurer/status/1029158262069899266">half an
hour</a> trying to
figure out how to change my password in BitBucket, and GitLab can't even keep
me logged in between sessions). GitHub has and continues to revolutionize the
open source ecosystem, and is still the best place to host an open source
project.</p>
<p>But since GitHub did
<a href="https://blog.github.com/2018-08-28-announcing-paper-cuts/">ask</a> what sorts of
changes they want to see, I'm providing a list. In this post I'm trying to
only ask about things that are small changes (though I realize many won't be
as easy to fix as they may appear from the outside, and I readily admit that I
am not a web developer).</p>
<p>These are just the things that have bothered me, personally. Other people use
GitHub differently and no doubt have their own pain points. For instance, I
have no suggestions about the project boards feature of GitHub because I don't
use it. If you are also a GitHub user and have your own pain points feel free
to use the comment box below (though I have no idea if GitHub will actually
see them).</p>
<p>If you work for GitHub and have any questions, feel free to comment below, or
<a href="mailto:asmeurer@gmail.com">email me</a>.</p>
<p>In no particular order:</p>
<h3>Issues</h3>
<ol>
<li>
<p><strong>Allow anyone to add labels to issues.</strong> At the very least, allow the
person who opened the issue to add labels.</p>
</li>
<li>
<p>The new issue transfer ability is great, but please <strong>make it require only
push access, not admin access.</strong></p>
</li>
<li>
<p><strong>Remove the automatic hiding of comments when there are too many.</strong> I
understand this is done for technical reasons, but it breaks
Cmd-F/scrolling through the page to find comments. Often I go to an issue
trying to find an old comment and can't because buried in the comments is a
button I have to press to actually show the comment (it's even worse when
you have to find and press the button multiple times).</p>
</li>
<li>
<p><strong>Better indication for cross-referenced pull requests.</strong> I really don't
know how to fix this, only that it is a problem. It happens all the time
that a new contributor comes to a SymPy issue and asks if it has been
worked on yet. They generally do not seem to notice the cross-referenced
pull requests in the list.
<a href="https://github.com/sympy/sympy/issues/14943">Here</a> is an example of what
I'm talking about.</p>
</li>
<li>
<p><strong>Indicate better if a cross-referenced pull request would close an
issue.</strong> Preferably with text, not just an icon.</p>
</li>
<li>
<p><strong>HTML pull request/issue templates.</strong> I don't know if this counts as a
"cut", as it isn't a simple fix. Right now, many projects use pull
requests/new issue templates, but it is not very user friendly. The problem
is that the whole thing is done in plain text, often with the template text
as an HTML comment to prevent it from appearing in the final issue text.
Even for me, I often find this quite difficult to read through, but for new
contributors, we often find that they don't read it at all. Sure there's no
way to force people to read, but if we could instead create a very simple
HTML form for people to fill out, it would be much more friendly, even to
experienced people like myself.</p>
</li>
<li>
<p><strong>Fix the back button in Chrome.</strong> I don't know if this is something that
GitHub can fix, and I also do not know how things work in other browsers. I
use Chrome on macOS. Often, when I click the "back" button and it takes me
back to an issue page, the contents of the page are out-of-date (the newest
comments or commits do not appear). It's often even more out-of-date than
it was when I left the page. I have to reload the page to get the latest
content.</p>
</li>
<li>
<p><strong>Allow Markdown formatting in issue titles.</strong></p>
</li>
<li>
<p><strong>Show people's names next to comments as "Real Name (@username)".</strong> In
general, GitHub should be emphasizing people's display names rather than
their usernames.</p>
</li>
<li>
<p><strong>Remember my selection for the "sort" setting in the issues list.</strong> I'd
love to have issues/pull requests sort by "most recently updated" by
default, so that I don't miss updates to old issues/pull requests.</p>
</li>
<li>
<p><strong>Make advanced search filters more accessible.</strong> They should autofill,
similar to how Gmail or even GitLab search works (yes, please steal all
the good ideas from GitLab; they already stole all their good ideas from
you).</p>
</li>
<li>
<p><strong>Tone down the reaction emojis.</strong> Maybe this ship has sailed, but
reaction emojis are way too unprofessional for some projects.</p>
</li>
<li>
<p><strong>Copy/paste text as Markdown.</strong> For example, copying "<strong>bold</strong>" and
pasting it into the comment box would paste <code>**bold**</code>. Another idea that
you can steal from GitLab.</p>
</li>
<li>
<p><strong>Strike out #12345 issue links when the issue/PR is closed/merged</strong>
(like <strike>#12345</strike>).</p>
</li>
</ol>
<h3>Pull requests</h3>
<ol start="15">
<li>
<p><strong>Add a button that automatically merges a pull request as soon as all the
CI checks pass.</strong> Any additional commits pushed to the branch in the
interim would cancel it, and it should also be cancellable by someone else
with push access or the PR author.</p>
</li>
<li>
<p><strong>Add some way to disable the automatic hiding of large diffs.</strong> This
breaks Cmd-F on the page, and makes it harder to scroll through the pull
request to find what you are looking for (typically the most important
changes are the ones that are hidden!).</p>
</li>
<li>
<p><strong>Include all issue/PR authors in the authors search on the pull request
list page.</strong> Right now it only lists people with push access. But I
generally can't remember people's GitHub usernames, and autofilling based
on all authors would be very helpful.</p>
</li>
<li>
<p><strong>Better contextual guesses for issue autofilling (after typing <code>#</code>).</strong>
For instance, if an issue has already been referenced or cross-referenced,
it should appear near the top of the list. We have almost <a href="https://github.com/sympy/sympy/issues">3000 open
issues</a> in SymPy, and the current
issue numbers are 5-digits long, so referencing an issue purely by number
is very error prone.</p>
</li>
<li>
<p><strong>Auto-update edited comments.</strong> Context: SymPy uses a
<a href="https://github.com/sympy/sympy-bot">bot</a> that comments on every pull
request, requiring a release notes entry to be added to the description.
This works quite well, but to prevent the bot from spamming, we have it
comment only once, and edit its comment on any further checks. However,
these edits do not automatically update, so people have to manually reload
the page to see them.</p>
</li>
<li>
<p><strong>Don't hide full commit messages by default in the commits view.</strong> It
would be better to encourage people to write good commit messages.</p>
</li>
<li>
<p><strong>Make issue cross-references in pull request titles work.</strong> I'd rather
people didn't put issue numbers in pull request titles but they do it
anyway, so it would be nice if they actually worked as links.</p>
</li>
<li>
<p><strong>Allow me to comment on lines that aren't visible by default.</strong> That is,
lines that you have to click the "expand" icon above or below the line
numbers to access. As an example, this can be useful to point out a line
that should have been changed but wasn't.</p>
</li>
<li>
<p><strong>Copying code from a diff that includes lines that aren't visible by
default includes an extra space to the left for those lines.</strong> This is a
straight up bug. Probably fixing the previous point would also fix this :)</p>
</li>
<li>
<p><strong>Make searches include text from the pull request diff.</strong></p>
</li>
<li>
<p><strong>When a diff indents a line color the whitespace to the left of the
line.</strong> (see
<a href="https://twitter.com/asmeurer/status/740611970714480640">this</a>)</p>
</li>
<li>
<p><strong>Pull requests can show commits that are already in master.</strong> For
example, if someone makes pull request B based off of pull request A and
then A gets merged, B will still show the commits from A. This has been a
bug forever.</p>
</li>
<li>
<p><strong>Make the "jump to file or symbol" popdown collapsible.</strong> Specifically
what I mean is I want to be able to show just the files, without any
symbols. For large pull requests, it is very difficult to use this popdown
if there are hundreds of symbols. I typically want to just jump to a
specific file.</p>
</li>
<li>
<p><strong>The status check on the favicon goes away when you switch to the diff
tab.</strong> Kudos to Marius Gedminas for <a href="https://twitter.com/mgedmin/status/1058381090694553601">pointing this
out</a>.</p>
</li>
<li>
<p><strong><a href="https://github.com/sympy/sympy/pull/15280#issuecomment-426795606">Apparently</a>
status checks that use the GitHub Apps API are forced to link into the
checks tab.</strong> The checks tab is useless if no information is actually
published to it. It would be better if it could link straight to the
external site, like is done with oauth integrations.</p>
</li>
<li>
<p><strong>Make it easier to copy someone's username from the pull request page.</strong>
I generally do this to <code>git remote add</code> them (using
<a href="https://github.com/github/hub">hub</a>). If I try to select their username
from a comment, it's a link, which makes it hard to select. I generally
copy it from the blue text at the top "<em>user</em> wants to merge <em>n</em> commits
from <code>sympy:master</code> from <code>user:branch</code>". If it were easier to select
"user" or "branch" from that box (say, by double clicking), that would be
helpful.</p>
</li>
<li>
<p><strong>Change the "resolve conversation" UI.</strong> I keep pressing it on accident
because it's where I expect the "new comment" button to be.</p>
</li>
</ol>
<h3>Reviews</h3>
<p>I wrote a <a href="https://www.asmeurer.com/blog/posts/github-reviews-gripes/">whole
post</a> about the
reviews feature when it came out. Not much has changed since then (actually,
it has gotten worse). In short, the feature doesn't work like I would like it
too, and I find the default behavior of deferred comments to be extremely
detrimental. If there were a way to completely disable reviews (for myself, I
don't care about other people using the feature), I would.</p>
<p>See my blog post for full details on why I think the reviews feature is broken
and actually makes things worse, not better than before. I've summarized a few
things that could change below.</p>
<ol start="32">
<li>
<p><strong>Make reviews non-deferred by default.</strong> This is the biggest thing. If I
had to pick only a single item on this page to be changed, it would be
this. The issue is if I start a review and walk away from it, but forget
to "finalize" it with a review status, the review is never actually seen
by anyone. The simplest way to fix this would be to simply make partial
reviews public.</p>
</li>
<li>
<p><strong>Make Cmd-Enter default to immediate comment.</strong> Barring the above change,
Cmd-Enter on a pull request line comment should default to immediate
comment, not deferred (review) comment. The problem with the
Cmd-Shift-Enter shortcut is that it is inconsistent: on a normal comment,
it closes the pull request, and on a reply comment, it does nothing. I
shouldn't have to check what "comment context" I am in to figure out what
keyboard shortcut to use. The worst part is if you accidentally start a
review, it's a pain in the ass to undo that and just post a normal
comment. The simplest way to fix this would be to swap the current meaning
of Cmd-Enter and Cmd-Shift-Enter for line comments (and no, this wouldn't
be a backwards incompatible change, it would be a regression fix;
Cmd-Enter <em>used</em> to do the right thing).</p>
</li>
<li>
<p><strong>Allow reviewing your own pull request.</strong> There's no reason to disallow
this, and it would often be quite useful to, for instance, mark a work in
progress PR as such with a "request changes" review. Obviously
self-reviews would be excluded from any required reviews.</p>
</li>
<li>
<p><strong>Unhide the reviews box.</strong> It should just be the same box as the comment
box, unstead of buried on the diff tab (see my <a href="https://www.asmeurer.com/blog/posts/github-reviews-gripes/">blog
post</a>).</p>
</li>
<li>
<p><strong>Show review status in the pull request list as a red X or green check.</strong>
This would make it easier to see which pull requests have reviews.</p>
</li>
<li>
<p><strong>Allow new commits to invalidate reviews.</strong> That way they work the same
way as any other status check. (I see that this is now an option for
required reviews, which is new since my original blog post, but it still
doesn't affect the status as reported on the pull requests list).</p>
</li>
<li>
<p><strong>Allow requiring zero negative reviews to merge (but not necessarily any
positive reviews)</strong>. Requiring a positive review is pointless. The person
merging can just add one real quick before they merge, but it is
unnecessary extra work. On the other hand allowing people with push access
to block a merge with a negative review would be very useful.</p>
</li>
</ol>
<h3>Web editor</h3>
<ol start="39">
<li>
<p><strong>The web editor seems to have a search function, but I can't get it to
actually work.</strong> Half the time Cmd-F pops open the browser search, which
doesn't find text that isn't on screen. And when I press Cmd-G to actually
do the search, it doesn't work (and there are no buttons to perform the
search either).</p>
</li>
<li>
<p><strong>Add basic syntax testing in the web editor for common languages to catch
basic mistakes.</strong></p>
</li>
</ol>
<h3>Mobile site</h3>
<ol start="41">
<li>
<p><strong>Please make the mobile site work with iOS 10.</strong> I don't see any reason
why simple things like buttons (like the merge button or the comment
button) shouldn't work on a slightly older browser. No, I am not a web
developer, but I do use my phone a lot and I've noticed that literally
every other website works just fine on it.</p>
</li>
<li>
<p><strong>Add a way to disable the mobile site permanently.</strong> For the most part,
the mobile site is useless (see below). If you aren't going to put full
development effort into it, allow me to disable it permanently so that
every time I visit <a href="https://github.com">github.com</a> on my phone it goes to
the desktop site.</p>
</li>
</ol>
<p>Seeing as how the site (mobile or not) is almost completely unusable on every
mobile device I own, it's hard to list other things here, but based on back
when it actually worked, these are some of the things that annoyed me the
most. Basically, I have found that virtually every time I go to GitHub to do
anything on mobile, I have to switch to desktop mode to actually do what I
want.</p>
<p>My apologies if any of these actually work now: as I said,
<a href="https://github.com">github.com</a> doesn't actually work at all on my phone.</p>
<ol start="43">
<li>
<p><strong>Cannot search issues on mobile.</strong></p>
</li>
<li>
<p><strong>Cannot make a line comment that <em>isn't</em> a review on mobile.</strong></p>
</li>
<li>
<p><strong>Cannot view lines beyond the default diff in pull requests on mobile.</strong></p>
</li>
<li>
<p><strong>Show more than 2 lines of the README and 0 lines of the code by default
on project pages.</strong> Yes mobile screens are small but it's also not hard to
scroll on them.</p>
</li>
<li>
<p><strong>Support Jupyter notebook rendering on mobile.</strong></p>
</li>
</ol>
<h3>Files view</h3>
<ol start="48">
<li>
<p><strong>GitHub needs a better default color theme for syntax highlighting.</strong>
Most of the colors are very similar to one another and hard to
differentiate. Also things like strings are black, even though one of the
most useful aspects of syntax highlighting generally is to indicate
whether something is in a string or not.</p>
</li>
<li>
<p><strong>Add MathJax support to markdown files.</strong> This would be amazingly useful
for SymPy, as well as many scientific software projects. Right now if you
want this you have to use a Jupyter notebook. MathJax support in
issue/pull request comments would be awesome as well, though I'm not
holding out for that.</p>
</li>
<li>
<p><strong>Add "display source" button for markdown, ReST, etc.</strong> I mean the button
that is already there for Jupyter notebooks. Right now you have to view
markdown and ReST files "raw" or edit the file to see their source.</p>
</li>
<li>
<p><strong>Add a link to the pull request in the blame view.</strong> Usually I want to
find the pull request that produced a change, not just the commit.</p>
</li>
</ol>
<h3>Wiki</h3>
<ol start="52">
<li>
<p><strong>The wikis used to support LaTeX math with MathJax. It would be great if
this were re-added.</strong></p>
</li>
<li>
<p><strong>The ability to set push permissions for the wiki separately from the
repo it is attached to, or otherwise create an oauth token that can only
push to the wiki would be useful.</strong> Context: for SymPy, we use a
<a href="https://github.com/sympy/sympy-bot">bot</a> that automatically updates our
<a href="https://github.com/sympy/sympy/wiki/Release-Notes">release notes</a> on our
wiki. It works quite well, but the only way it can push to the wiki is if
we give it push access to the full repo.</p>
</li>
</ol>
<h3>Notification emails</h3>
<ol start="54">
<li>
<p><strong>Don't clobber special emails/email headers.</strong> GitHub adds special emails
like <a href="mailto:author@noreply.github.com">author@noreply.github.com</a> and
<a href="mailto:mention@noreply.github.com">mention@noreply.github.com</a> to email
notifications based on how the notification was triggered. This is useful,
as I can create an email filter for
<a href="mailto:author@noreply.github.com">author@noreply.github.com</a> for
notifications on issues and pull requests created by me. The bad news is,
<a href="mailto:mention@noreply.github.com">mention@noreply.github.com</a>, which is
added when I am @mentioned, clobbers
<a href="mailto:author@noreply.github.com">author@noreply.github.com</a>, so that it
doesn't appear anymore. In other words, as soon as someone @mentions me in
one of my issues, I become <em>less</em> likely to see it, because it no longer
gets my label (I get @mentioned on <em>a lot</em> of issues and don't have the
ability to read all of my notification emails). Ditto for the
<code>X-GitHub-Reason</code> email headers.</p>
</li>
<li>
<p><strong>Readd the "view issue" links in Gmail.</strong> (I forgot what these are
called). GitHub notification emails used to have these useful "view issue"
buttons that showed up on the right in the email list in Gmail, but they
were removed for some reason.</p>
</li>
</ol>
<h3>API</h3>
<ol start="56">
<li>
<p><strong>Make the requests in the API docs actually return what they show in the
docs.</strong> This means the <a href="https://github.com/octocat/Hello-World/">example
repo</a> should have actual example
issues corresponding to what is shown in the docs.</p>
</li>
<li>
<p><strong>Allow giving deploy key access to just one branch.</strong> That way I can have
a deploy key for <code>gh-pages</code> and minimize the attack surface that the
existence of that key produces. I think everyone would agree that more
fine-grained permissions throughout the API would be nice, but this is one
that would benefit me personally, specifically for my project
<a href="https://drdoctr.github.io/">doctr</a>.</p>
</li>
</ol>
<h3>GitHub Pages</h3>
<p>GitHub pages is one of the best features of GitHub, and in fact, this very
blog is hosted on it. Very few complaints here, because for the most part, it
"just works".</p>
<ol start="58">
<li>
<p><a href="https://twitter.com/asmeurer/status/831962312122761216"><strong>Moar themes.</strong></a>
Also it's awesome that you can use any GitHub repo as a theme now, but it
turns out most random themes you find around GitHub don't actually work
very well.</p>
</li>
<li>
<p><strong>The steps to add HTTPS to an existing GitHub pages custom domain are a
bit confusing.</strong>. This took us a while to figure out for
<a href="https://sympy.org">sympy.org</a>. To get things to work, you have to trigger
GitHub to issue a cert for the domain. But the UI to issue the cert is to
paste the domain into the box. So if the domain is already there but it
doesn't work, you have to re-enter it. Also if you want both www and the
apex domain to be HTTPS you have to enter them both in the box to trigger
GitHub to issue a cert. This is primarily a UX issue. See
<a href="https://github.com/sympy/sympy.github.com/issues/105#issuecomment-415899934">https://github.com/sympy/sympy.github.com/issues/105#issuecomment-415899934</a>.</p>
</li>
</ol>
<h3>Settings</h3>
<ol start="60">
<li>
<p><strong>Automatically protected branches make the branch difficult to delete
when you are done with it.</strong> My use-case is to create a branch for a
release, which I want to protect, but I also want to delete the branch
once it is merged. I can protect the branch automatically pretty easily,
but then I have to go and delete the protection rule when it's merged to
delete it. There are several ways this could be fixed. For instance, you
could add a rule to allow protected branches to be deleted if they are
up-to-date with default branch.</p>
</li>
<li>
<p><strong>Add a way to disable the ability for non-admins to create new branches
on a repo.</strong> We want all of our pull requests to come from forks. Branches
in the repo just create confusion, for instance, they appear whenever
someone clones the repository.</p>
</li>
<li>
<p><strong>Related to the previous point, make pull request reverts come from
forks.</strong> Right now when someone uses the revert pull request button, it
creates a new branch in the same repo, but it would be better if the
branch were made in the person's fork.</p>
</li>
<li>
<p><strong>Allow me to enable branch protection by default for new repos.</strong></p>
</li>
<li>
<p><strong>Allow me to enable branch protection by default on new branches.</strong> This
is more important than the previous one because of the feature that lets
people push to your branch on a pull request (which is a great feature by
the way).</p>
</li>
<li>
<p><strong>Clicking a team name in the settings should default to the "members"
tab.</strong> I don't understand why GitHub has a non-open "discussions" feature,
but I find it to be completely useless, and generally see such things as
harmful for open source.</p>
</li>
<li>
<p><strong>Suggest people to add push access to.</strong> I don't necessarily mean
passively (though that could be interesting too), but I mean in the page
to add someone, it would be nice if the popup suggested or indicated which
people had contributed the project before, since just searching for a name
searches all of GitHub, and I don't want to accidentally give access to
the wrong person.</p>
</li>
</ol>
<h3>Profiles</h3>
<ol start="67">
<li>
<p><strong>Stop trying to make profile pages look "cute" with randomly highlighted
pull requests.</strong> GitHub should have learned by now that profile pages
matter a lot (whether people want them to or not), and there can be
unintended consequences to the things that are put on them.</p>
</li>
<li>
<p><strong>Explain what the axes actually mean in the new "activity overview".</strong>
I'm referring to
<a href="https://twitter.com/asmeurer/status/1033141923630874624">this</a> (it's
still in beta and you have to manually enable it on your profile page).
Personally I'm leaving the feature off because I don't like being
metricized/gamified, but if you're going to have it, at least include some
transparency.</p>
</li>
</ol>
<h3>Releases</h3>
<ol start="69">
<li>
<strong>Allow hiding the "source code (zip)" and "source code (tar.gz)" files in
a release.</strong> We upload our actual release files (generated by <code>setup.py</code>)
to the GitHub release. We want people to download those, not snapshots of
the repo.</li>
</ol>
<h3>Miscellaneous</h3>
<ol start="70">
<li>
<p><strong>The repository search function doesn't support partial matches.</strong> This
is annoying for <a href="https://github.com/conda-forge/">conda-forge</a>. For
instance, if I <a href="https://github.com/conda-forge/?utf8=%E2%9C%93&amp;q=png&amp;type=&amp;language=">search for
"png"</a>
it doesn't show the
<a href="https://github.com/conda-forge/libpng-feedstock">libpng-feedstock</a> repo.</p>
</li>
<li>
<p><strong>Show commit history as a graph.</strong> Like <code>git log --graph</code>. This would go
a <em>long</em> way to helping new users understand git. When I first started
with git, understanding the history as a graph was a major part of me
finally grokking how it worked.</p>
</li>
<li>
<p><strong>Bring back the old "fork" UI.</strong> The one that just had icons for all the
repos, and the icons didn't go away or become harder to find if you
already had a fork. Some of us use the "fork" button to go to our
pre-existing forks, not just to perform a fork action. This was recently
changed and now it's better than it was, but I still don't see why
existing forks need to be harder to find, visually, than nonexisting ones.</p>
</li>
<li>
<p><strong>Provide a more official way to request fixes to these cuts.</strong> I often
ask on Twitter, but get no response. Preferably something public so that
others could vote on them (but I understand if you don't want too much
bikeshedding).</p>
</li>
</ol>
</div>
    </div>
    </article><article class="h-entry post-text" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title"><a href="posts/automatically-deploying-this-blog-to-github-pages-with-travis-ci/" class="u-url">Automatically deploying this blog to GitHub Pages with Travis CI</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Aaron Meurer
            </span></p>
            <p class="dateline">
            <a href="posts/automatically-deploying-this-blog-to-github-pages-with-travis-ci/" rel="bookmark">
            <time class="published dt-published" datetime="2017-06-19T14:21:32-05:00" itemprop="datePublished" title="2017-06-19 14:21">2017-06-19 14:21</time></a>
            </p>
                <p class="commentline">
        
    <a href="posts/automatically-deploying-this-blog-to-github-pages-with-travis-ci/#disqus_thread" data-disqus-identifier="cache/posts/automatically-deploying-this-blog-to-github-pages-with-travis-ci.html">Comments</a>


        </p>
</div>
    </header><div class="e-content entry-content">
    <div>
<p>This blog is now <a href="http://travis-ci.org/asmeurer/blog">deployed to GitHub pages automatically</a> from Travis CI.</p>
<p>As I've outlined in the <a href="posts/automatically-deploying-this-blog-to-github-pages-with-travis-ci/moving-to-github-pages-with-nikola/">past</a>, this
website is built with the <a href="https://getnikola.com/">Nikola</a> static blogging
engine. I really like Nikola because it uses Python, has lots of nice
extensions, and
is
<a href="https://github.com/getnikola/nikola/blob/master/LICENSE.txt">sanely licensed</a>.</p>
<p>Most importantly, it is a static site generator, meaning I write my posts in
Markdown, and Nikola generates the site as static web content ("static" means no web server
is required to run the site). This means that the site can be hosted for free
on <a href="https://pages.github.com/">GitHub pages</a>. This is how this site has been
hosted since I started it. I have
a <a href="http://github.com/asmeurer/blog">GitHub repo</a> for the site, and the content
itself is deployed to
the <a href="https://github.com/asmeurer/blog/tree/gh-pages">gh-pages</a> branch of the
repo. But until now, the deployment has happened only manually with the
<code>nikola github_deploy</code> command.</p>
<p>A much better way is to deploy automatically using Travis CI. That way, I do
not need to run any software on my computer to deploy the blog.</p>
<p>The steps outlined here will work for any static site generator. They assume
you already have one set up and hosted on GitHub.</p>
<h3>Step 1: Create a .travis.yml file</h3>
<p><strong>Create a <code>.travis.yml</code> file like the one below</strong></p>
<pre><code class="language-yaml">sudo: false
language: python

python:
  - 3.6

install:
  - pip install "Nikola[extras]" doctr

script:
  - set -e
  - nikola build
  - doctr deploy . --built-docs output/
</code></pre>
<ul>
<li>If you use a different static site generator, replace <code>nikola</code> with that
site generator's command.</li>
<li>If you have Nikola configured to output to a different directory, or use a
different static site generator, replace <code>--built-docs output/</code> with the
directory where the site is built.</li>
<li>Add any extra packages you need to build your site to the <code>pip install</code>
command. For instance, I use the <code>commonmark</code> extension for Nikola, so I
need to install <code>commonmark</code>.</li>
<li>The <code>set -e</code> line is important. It will prevent the blog from being deployed
if the build fails.</li>
</ul>
<p><strong>Then go to <a href="http://www.asmeurer.com/blog/">https://travis-ci.org/profile/</a> and enable Travis for your blog
repo.</strong></p>
<h3>Step 2: Run doctr</h3>
<p>The key here is <a href="https://drdoctr.github.io/doctr/">doctr</a>, a tool I wrote with
<a href="https://github.com/gforsyth">Gil Forsyth</a> that makes deploying anything from
Travis CI to GitHub Pages a breeze. It automatically handles creating and
encrypting a deploy SSH key for GitHub, and the syncing of files to the
<code>gh-pages</code> branch.</p>
<p><strong>First install doctr.</strong> <code>doctr</code> requires
Python 3.5+, so you'll need that. You can install it with conda:</p>
<pre><code class="language-bash">conda install -c conda-forge doctr
</code></pre>
<p>or if you don't use conda, with pip</p>
<pre><code class="language-bash">pip install doctr
</code></pre>
<p><strong>Then run this command in your blog repo:</strong></p>
<pre><code class="language-bash">doctr configure
</code></pre>
<p>This will ask you for your GitHub username and password,
and for the name of the repo you are deploying from and to (for instance, for
my blog, I entered <code>asmeurer/blog</code>). The output will look something like this:</p>
<!-- http seems to give the least amount of highlighting. text is -->
<!-- supposed to work, but doesn't render correctly. -->
<pre><code class="language-http">$ doctr configure
What is your GitHub username? asmeurer
Enter the GitHub password for asmeurer:
A two-factor authentication code is required: app
Authentication code: 911451
What repo do you want to build the docs for (org/reponame, like 'drdoctr/doctr')? asmeurer/blog
What repo do you want to deploy the docs to? [asmeurer/blog] asmeurer/blog
Generating public/private rsa key pair.
Your identification has been saved in github_deploy_key.
Your public key has been saved in github_deploy_key.pub.
The key fingerprint is:
SHA256:4cscEfJCy9DTUb3DnPNfvbBHod2bqH7LEqz4BvBEkqc doctr deploy key for asmeurer/blog
The key's randomart image is:
+---[RSA 4096]----+
|    ..+.oo..     |
|     *o*..  .    |
|      O.+  o o   |
|     E + o  B  . |
|      + S .  +o +|
|       = o o o.o+|
|        * . . =.=|
|       . o ..+ =.|
|        o..o+oo  |
+----[SHA256]-----+

The deploy key has been added for asmeurer/blog.

You can go to https://github.com/asmeurer/blog/settings/keys to revoke the deploy key.

================== You should now do the following ==================

1. Commit the file github_deploy_key.enc.

2. Add

    script:
      - set -e
      - # Command to build your docs
      - pip install doctr
      - doctr deploy &lt;deploy_directory&gt;

to the docs build of your .travis.yml.  The 'set -e' prevents doctr from
running when the docs build fails. Use the 'script' section so that if
doctr fails it causes the build to fail.

3. Put

    env:
      global:
        - secure: "Kf8DlqFuQz9ekJXpd3Q9sW5cs+CvaHpsXPSz0QmSZ01HlA4iOtdWVvUttDNb6VGyR6DcAkXlADRf/KzvAJvaqUVotETJ1LD2SegnPzgdz4t8zK21DhKt29PtqndeUocTBA6B3x6KnACdBx4enmZMTafTNRX82RMppwqxSMqO8mA="

in your .travis.yml.
</code></pre>
<p>Follow the steps at the end of the command:</p>
<ol>
<li><strong>Commit the file <code>github_deploy_key.enc</code>.</strong></li>
<li>You already have <code>doctr deploy</code> in your <code>.travis.yml</code> from step 1 above.</li>
<li>
<strong>Add the <code>env</code> block to your <code>.travis.yml</code>.</strong> This will let Travis CI decrypt
the SSH key used to deploy to <code>gh-pages</code>.</li>
</ol>
<h3>That's it</h3>
<p>Doctr will now deploy your blog automatically. You may want to look at the
Travis build to make sure everything works. Note that <code>doctr</code> only deploys
from <code>master</code> by default (see below). You may also want to look at the
other
<a href="https://drdoctr.github.io/doctr/commandline.html#doctr-deploy">command line flags</a> for
<code>doctr deploy</code>, which let you do things such as to deploy to <code>gh-pages</code> for a
different repo than the one your blog is hosted on.</p>
<p>I recommend these steps over the ones in
the
<a href="https://getnikola.com/blog/automating-nikola-rebuilds-with-travis-ci.html">Nikola manual</a> because
doctr handles the SSH key generation for you, making things more secure. I
also found that the <code>nikola github_deploy</code> command
was <a href="https://github.com/getnikola/nikola/issues/2847">doing too much</a>, and
<code>doctr</code> handles syncing the built pages already anyway. Using <code>doctr</code> is much
simpler.</p>
<h3>Extra stuff</h3>
<h4>Reverting a build</h4>
<p>If a build goes wrong and you need to revert it, you'll need to use git to
revert the commit on your <code>gh-pages</code> branch. Unfortunately, GitHub doesn't
seem to have a way to revert commits in their web interface, so it has to be
done from the command line.</p>
<h4>Revoking the deploy key</h4>
<p>To revoke the deploy key generated by doctr, go your repo in GitHub, click on
"settings" and then "deploy keys". Do this if you decide to stop using this,
or if you feel the key may have been compromised. If you do this, the
deployment will stop until you run step 2 again to create a new key.</p>
<h4>Building the blog from branches</h4>
<p>You can also build your blog from branches, e.g., if you want to test things
out without deploying to the final repo.</p>
<p>We will use the steps
outlined
<a href="https://drdoctr.github.io/doctr/recipes.html#deploy-docs-from-any-branch">here</a>.</p>
<p>Replace the line</p>
<pre><code class="language-yaml">  - doctr deploy . --built-docs output/
</code></pre>
<p>in your <code>.travis.yml</code> with something like</p>
<pre><code class="language-yaml">  - if [[ "${TRAVIS_BRANCH}" == "master" ]]; then
      doctr deploy . --built-docs output/;
    else
      doctr deploy "branch-$TRAVIS_BRANCH" --built-docs output/ --no-require-master;
    fi
</code></pre>
<p>This will deploy your blog as normal from <code>master</code>, but from a branch it will
deploy to the <code>branch-&lt;branchname&gt;</code> subdir. For instance, my blog is at
<a href="http://www.asmeurer.com/blog/">http://www.asmeurer.com/blog/</a>, and if I had a branch called <code>test</code>, it would
deploy it to <a href="posts/automatically-deploying-this-blog-to-github-pages-with-travis-ci/">http://www.asmeurer.com/blog/branch-test/</a>.</p>
<p>Note that it will not delete old branches for you from <code>gh-pages</code>. You'll need
to do that manually once they are merged.</p>
<p>This only works for branches in the same repo. It is not possible to deploy
from a branch from pull request from a fork, for security purposes.</p>
<h4>Enable build cancellation in Travis</h4>
<p>If you go the Travis page for your blog and choose "settings" from the
hamburger menu, you can enable auto cancellation for branch builds. This will
make it so that if you push many changes in succession, only the most recent
one will get built. This makes the changes get built faster, and lets you
revert mistakes or typos without them ever actually being deployed.</p>
</div>
    </div>
    </article>
</div>

        <nav class="postindexpager"><ul class="pager">
<li class="next">
                <a href="index-4.html" rel="next">Older posts</a>
            </li>
        </ul></nav><script>var disqus_shortname="asmeurer";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-SDRP1VVYu+tgAGKhddBSl5+ezofHKZeI+OzxakbIe/Y=" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
   tex2jax: {
       inlineMath: [ ['$','$'], ["\\(","\\)"], ],
       displayMath: [ ['$$','$$'], ["\\[","\\]"] ]
   },
   displayAlign: 'center', // Change this to 'center' to center equations.
   "HTML-CSS": {
       styles: {'.MathJax_Display': {"margin": 0}}
   }
});
</script></main><footer id="footer"><p>Contents © 2019         <a href="mailto:asmeurer@gmail.com">Aaron Meurer</a> - Powered by         <a href="http://getnikola.com" rel="nofollow">Nikola</a>         
</p>
<p xmlns:dct="https://purl.org/dc/terms/" xmlns:vcard="https://www.w3.org/2001/vcard-rdf/3.0#">
  <a rel="license" href="https://creativecommons.org/publicdomain/zero/1.0/">
    <img src="https://i.creativecommons.org/p/zero/1.0/88x31.png" style="border-style: none;" alt="CC0"></a>
</p>
            
        </footer>
</div>
    
            <script src="assets/js/all-nocdn.js"></script><div style="text-align:center">
<span class="st_twitterfollow_large" displaytext="Twitter Follow" st_username="asmeurer"></span>
<span class="st_twitter_large" displaytext="Tweet"></span>
<span class="st_googleplus_large" displaytext="Google +"></span>
<span class="st_plusone_large" displaytext="Google +1"></span>

<span class="st_email_large" displaytext="Email"></span>

</div>


    
    <script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
